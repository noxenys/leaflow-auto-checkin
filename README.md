# Leaflow è‡ªåŠ¨ç­¾åˆ°è„šæœ¬

è¿™æ˜¯ä¸€ä¸ªç”¨äºåœ¨ [Leaflow](https://leaflow.net/) ç½‘ç«™ä¸Šè‡ªåŠ¨æ‰§è¡Œæ¯æ—¥ç­¾åˆ°çš„ Python è„šæœ¬ã€‚æ”¯æŒ GitHub Actions è‡ªåŠ¨è¿è¡Œå’Œæœ¬åœ°è¿è¡Œã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

- **å¤šè´¦å·æ”¯æŒ**ï¼šé€šè¿‡ç¯å¢ƒå˜é‡è½»æ¾ç®¡ç†å¤šä¸ª Leaflow è´¦å·ã€‚
- **è‡ªåŠ¨ç­¾åˆ°**ï¼šæ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œï¼Œè‡ªåŠ¨å®Œæˆæ¯æ—¥ç­¾åˆ°ï¼Œèµšå–å¥–åŠ±ã€‚
- **ä½™é¢æŸ¥è¯¢**ï¼šè‡ªåŠ¨è·å–å¹¶æ˜¾ç¤ºæ¯ä¸ªè´¦å·çš„å½“å‰ä½™é¢ã€‚
- **Telegram é€šçŸ¥**ï¼šé€šè¿‡ Telegram Bot å‘é€ç­¾åˆ°ç»“æœé€šçŸ¥ã€‚
- **GitHub Actions é›†æˆ**ï¼šæ”¯æŒé€šè¿‡ GitHub Actions å®ç°æ¯æ—¥å®šæ—¶è‡ªåŠ¨ç­¾åˆ°ã€‚
- **é˜²æ£€æµ‹æœºåˆ¶**ï¼šä½¿ç”¨æ–°ç‰ˆæ— å¤´æ¨¡å¼å’Œè‡ªå®šä¹‰ User-Agentï¼Œæœ‰æ•ˆç»•è¿‡ç½‘ç«™æ£€æµ‹ã€‚
- **ç¨³å¥è¿è¡Œ**ï¼šå†…ç½®é‡è¯•æœºåˆ¶ã€è¶…æ—¶å¤„ç†å’Œé”™è¯¯æ¢å¤ï¼Œç¡®ä¿ç­¾åˆ°æˆåŠŸç‡ã€‚

## ç­¾åˆ°å…¥å£å˜æ›´è¯´æ˜

- ç”±äºå®˜æ–¹è·¯ç”±è°ƒæ•´ï¼ŒåŸ `https://checkin.leaflow.net` åœ¨éƒ¨åˆ†åœ°åŒºå¯èƒ½è¶…æ—¶ã€‚
- å½“å‰ç­¾åˆ°å…¥å£ä½äºä¸»ç«™å·¥ä½œç©ºé—´é¡µé¢ï¼š`https://leaflow.net/workspaces`ï¼Œç‚¹å‡»â€œç­¾åˆ°è¯•ç”¨â€å¼¹çª—åå†ç‚¹â€œç«‹å³ç­¾åˆ°â€ã€‚
- è„šæœ¬å·²æ”¯æŒä»å·¥ä½œç©ºé—´å¼¹çª—ç­¾åˆ°ï¼Œå¹¶æ”¯æŒè‡ªå®šä¹‰ç­¾åˆ°å…¥å£ï¼š
  - `LEAFLOW_CHECKIN_URL`ï¼šå•ä¸ª URLã€‚
  - `LEAFLOW_CHECKIN_URLS`ï¼šå¤šä¸ª URLï¼ˆé€—å·åˆ†éš”ï¼ŒæŒ‰é¡ºåºå°è¯•ï¼‰ã€‚
- è‹¥è®¿é—®ä¸ç¨³å®šï¼Œå»ºè®®å°†ä¸»ç«™å…¥å£æ”¾åœ¨ `LEAFLOW_CHECKIN_URLS` çš„ç¬¬ä¸€ä½ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹ (GitHub Actions)

æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ GitHub Actions è¿›è¡Œæ¯æ—¥è‡ªåŠ¨ç­¾åˆ°ï¼Œæ— éœ€æœ¬åœ°ç¯å¢ƒã€‚

### 1. Fork æœ¬ä»“åº“

ç‚¹å‡»æœ¬é¡µé¢å³ä¸Šè§’çš„ **Fork** æŒ‰é’®ï¼Œå°†æ­¤ä»“åº“å¤åˆ¶åˆ°ä½ è‡ªå·±çš„ GitHub è´¦å·ä¸‹ã€‚

### 2. è®¾ç½® Secrets

åœ¨ä½  Fork çš„ä»“åº“é¡µé¢ï¼Œç‚¹å‡» **Settings** -> **Secrets and variables** -> **Actions**ï¼Œç„¶åç‚¹å‡» **New repository secret** æ·»åŠ ä»¥ä¸‹å¯†é’¥ï¼š

| Secret åç§° | æè¿° | æ ¼å¼ |
| :--- | :--- | :--- |
| `LEAFLOW_ACCOUNTS` | **ï¼ˆæ¨èï¼‰** ä½ çš„ Leaflow è´¦å·ä¿¡æ¯ï¼ˆæ”¯æŒå¤šè´¦å·ï¼‰ | `é‚®ç®±1:å¯†ç 1,é‚®ç®±2:å¯†ç 2` (å¤šä¸ªè´¦å·ç”¨é€—å·éš”å¼€) |
| `LEAFLOW_EMAIL` | ï¼ˆå¤‡é€‰ï¼‰å•ä¸ª Leaflow è´¦å·é‚®ç®± | `your_email@example.com` |
| `LEAFLOW_PASSWORD` | ï¼ˆå¤‡é€‰ï¼‰å•ä¸ª Leaflow è´¦å·å¯†ç  | `your_password` |
| `LEAFLOW_CHECKIN_URL` | ï¼ˆå¯é€‰ï¼‰å•ä¸ªç­¾åˆ°å…¥å£ URL | `https://leaflow.net/workspaces` |
| `LEAFLOW_CHECKIN_URLS` | ï¼ˆå¯é€‰ï¼‰å¤šä¸ªç­¾åˆ°å…¥å£ URLï¼ˆä¼˜å…ˆçº§ä»å·¦åˆ°å³ï¼‰ | `https://leaflow.net/workspaces,https://checkin.leaflow.net` |
| `TELEGRAM_BOT_TOKEN` | ï¼ˆå¯é€‰ï¼‰ä½ çš„ Telegram Bot Token | è¯¦æƒ…è§ä¸‹æ–‡ |
| `TELEGRAM_CHAT_ID` | ï¼ˆå¯é€‰ï¼‰ä½ çš„ Telegram Chat ID | è¯¦æƒ…è§ä¸‹æ–‡ |

**Telegram é€šçŸ¥é…ç½®è¯´æ˜ï¼š**
1.  **åˆ›å»ºæœºå™¨äºº**ï¼šåœ¨ Telegram ä¸­æœç´¢ `@BotFather`ï¼Œå‘é€ `/newbot` å‘½ä»¤åˆ›å»ºæœºå™¨äººï¼Œè·å– Tokenã€‚
2.  **è·å– Chat ID**ï¼šåœ¨ Telegram ä¸­æœç´¢ `@userinfobot`ï¼Œè·å–ä½ çš„ IDã€‚

### 3. å¯ç”¨ GitHub Actions

åœ¨ä½  Fork çš„ä»“åº“é¡µé¢ï¼Œç‚¹å‡» **Actions** é€‰é¡¹å¡ï¼Œç„¶åç‚¹å‡» **I understand my workflows, go ahead and enable them** å¯ç”¨å·¥ä½œæµã€‚

### 4. è¿è¡Œæµ‹è¯•

1.  åœ¨ **Actions** é¡µé¢ï¼Œç‚¹å‡»å·¦ä¾§çš„ **Leaflow Auto Checkin** å·¥ä½œæµã€‚
2.  ç‚¹å‡»å³ä¾§çš„ **Run workflow** ä¸‹æ‹‰èœå•ï¼Œç‚¹å‡»ç»¿è‰²çš„ **Run workflow** æŒ‰é’®ã€‚
3.  ç­‰å¾…è¿è¡Œå®Œæˆï¼ŒæŸ¥çœ‹æ—¥å¿—ç¡®è®¤æ˜¯å¦ç­¾åˆ°æˆåŠŸã€‚

æ­¤åï¼Œè„šæœ¬å°†åœ¨æ¯å¤© UTC æ—¶é—´ 01:15ï¼ˆåŒ—äº¬æ—¶é—´ 09:15ï¼‰è‡ªåŠ¨è¿è¡Œã€‚


## Fork åå¦‚ä½•æ›´æ–°

å¦‚æœä½ å·²ç» Fork è¿‡æœ¬ä»“åº“ï¼Œæ¨èä¸¤ç§æ–¹å¼åŒæ­¥æ›´æ–°ï¼š

**æ–¹å¼ä¸€ï¼šGitHub ç½‘é¡µä¸€é”®åŒæ­¥**
1. æ‰“å¼€ä½ è‡ªå·±çš„ Fork ä»“åº“ä¸»é¡µ
2. ç‚¹å‡» "Sync fork" -> "Update branch"
3. ç­‰å¾…åŒæ­¥å®Œæˆ

**æ–¹å¼äºŒï¼šæœ¬åœ°å‘½ä»¤è¡ŒåŒæ­¥**
```bash
git remote add upstream https://github.com/<åŸä½œè€…>/<ä»“åº“å>.git
git fetch upstream
git checkout main
git merge upstream/main
git push origin main
```
å¦‚ä½ çš„é»˜è®¤åˆ†æ”¯æ˜¯ masterï¼Œè¯·æŠŠ main æ›¿æ¢ä¸º masterã€‚
å¦‚æœå‡ºç°å†²çªï¼Œè¯·æŒ‰æç¤ºè§£å†³åå†æ¨é€ã€‚

## ğŸ’» æœ¬åœ°è¿è¡ŒæŒ‡å—

å¦‚æœä½ æƒ³åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šè¿è¡Œæˆ–è°ƒè¯•è„šæœ¬ï¼š

### å‰ç½®è¦æ±‚
- Python 3.8+
- Chrome æµè§ˆå™¨

### æ­¥éª¤

1.  **å…‹éš†ä»“åº“**
    ```bash
    git clone https://github.com/your-username/leaflow-auto-checkin.git
    cd leaflow-auto-checkin
    ```

2.  **å®‰è£…ä¾èµ–**
    ```bash
    pip install -r requirements.txt
    ```

3.  **è®¾ç½®ç¯å¢ƒå˜é‡å¹¶è¿è¡Œ**

    **Windows (PowerShell):**
    ```powershell
    $env:LEAFLOW_ACCOUNTS="email@example.com:password"
    python leaflow_checkin.py
    ```

    **Linux / macOS:**
    ```bash
    export LEAFLOW_ACCOUNTS="email@example.com:password"
    python leaflow_checkin.py
    ```

## ğŸ”§ æŠ€æœ¯æ¶æ„

- **æ ¸å¿ƒ**ï¼šåŸºäº Selenium WebDriver æ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸ºã€‚
- **ç¯å¢ƒé€‚é…**ï¼š
  - è‡ªåŠ¨è¯†åˆ« GitHub Actions ç¯å¢ƒï¼Œä½¿ç”¨ `headless=new` æ¨¡å¼ã€‚
  - æœ¬åœ°è¿è¡Œæ—¶å¯è§æµè§ˆå™¨çª—å£ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚
  - ä½¿ç”¨ `webdriver-manager` è‡ªåŠ¨ç®¡ç† ChromeDriver ç‰ˆæœ¬ã€‚
- **ç¨³å®šæ€§**ï¼š
  - æ˜¾å¼ç­‰å¾…ï¼ˆExplicit Waitsï¼‰ç¡®ä¿å…ƒç´ åŠ è½½ã€‚
  - æ™ºèƒ½é‡è¯•æœºåˆ¶å¤„ç†ç½‘ç»œæ³¢åŠ¨ã€‚
  - è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºã€‚

## âš ï¸ å…è´£å£°æ˜

- æœ¬è„šæœ¬ä»…ç”¨äºå­¦ä¹ å’ŒæŠ€æœ¯äº¤æµï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”ã€‚
- ä½¿ç”¨æœ¬è„šæœ¬æ‰€é€ æˆçš„ä»»ä½•åæœç”±ä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ‹…ã€‚
- è¯·å‹¿æ»¥ç”¨æ­¤è„šæœ¬ï¼Œä»¥å…å¯¹ç›®æ ‡ç½‘ç«™é€ æˆä¸å¿…è¦çš„è´Ÿæ‹…ã€‚
